\documentclass[a4paper,12pt]{book}
\usepackage{amsmath,  amsthm,enumerate}
\usepackage{csquotes}
\usepackage[provide=*,french]{babel}
\usepackage[dvipsnames]{xcolor}
\usepackage{quiver, tikz}

%symbole caligraphique
\usepackage{mathrsfs}

%hyperliens
\usepackage{hyperref}

%pseudo-code
\usepackage{algorithm}
\usepackage{algpseudocode}

\usepackage{fancyhdr}

\pagestyle{fancy}
\addtolength{\headwidth}{\marginparsep}
\addtolength{\headwidth}{\marginparwidth}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{}
\fancyfoot[C]{\thepage}
\fancyhead[LO]{\textit \leftmark}
\fancyhead[RE]{\textit \rightmark}
\renewcommand{\headrulewidth}{0pt} % and the line
\fancypagestyle{plain}{%
    \fancyhead{} % get rid of headers
}

%bibliographie
\usepackage[
backend=biber,
style=alphabetic,
sorting=ynt
]{biblatex}

\addbibresource{bib.bib}

\usepackage{appendix}
\renewcommand{\appendixpagename}{Annexe}

\definecolor{wgrey}{RGB}{148, 38, 55}

\setlength\parindent{24pt}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\rel}{\omathcal{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\B}{\mathcal{B}}
\newcommand{\Or}{\mathcal{O}}
\newcommand{\F}{\mathscr F}
\newcommand{\Hom}{\textrm{Hom}}
\newcommand{\disc}{\textrm{disc}}
\newcommand{\Pic}{\textrm{Pic}}
\newcommand{\End}{\textrm{End}}
\newcommand{\Spec}{\textrm{Spec}}
\newcommand{\Supp}{\textrm{Supp}}
\renewcommand{\Im}{\textrm{Im}}
\newcommand{\m}{\mathfrak{m}}
\renewcommand{\P}{\mathbb{P}}


\newcommand{\cL}{\mathscr{L}}
\newcommand{\G}{\mathscr{G}}
\newcommand{\D}{\mathscr{D}}
\newcommand{\E}{\mathscr{E}}
\newcommand{\Po}{\mathscr{P}}
\renewcommand{\H}{\mathscr{H}}

\makeatletter
\newcommand{\colim@}[2]{%
  \vtop{\m@th\ialign{##\cr
    \hfil$#1\operator@font colim$\hfil\cr
    \noalign{\nointerlineskip\kern1.5\ex@}#2\cr
    \noalign{\nointerlineskip\kern-\ex@}\cr}}%
}
\newcommand{\colim}{%
  \mathop{\mathpalette\colim@{\rightarrowfill@\scriptscriptstyle}}\nmlimits@
}
\renewcommand{\varprojlim}{%
  \mathop{\mathpalette\varlim@{\leftarrowfill@\scriptscriptstyle}}\nmlimits@
}
\renewcommand{\varinjlim}{%
  \mathop{\mathpalette\varlim@{\rightarrowfill@\scriptscriptstyle}}\nmlimits@
}
\makeatother

\theoremstyle{plain}
\newtheorem{thm}[subsection]{Théoreme}
\newtheorem{lem}[subsection]{Lemme}
\newtheorem{prop}[subsection]{Proposition}
\newtheorem{cor}[subsection]{Corollaire}
\newtheorem{heur}{Heuristique}
\newtheorem{rem}{Remarque}
\newtheorem{note}{Note}

\theoremstyle{definition}
\newtheorem{conj}{Conjecture}
\newtheorem{prob}{Problème}
\newtheorem{quest}{Question}
\newtheorem{prot}{Protocole}
\newtheorem{algo}{Algorithme}
\newtheorem{defn}[subsection]{Définition}
\newtheorem{exmp}[subsection]{Exemples}
\newtheorem{exo}[subsection]{Exercices}
\newtheorem{ex}[subsection]{Exemple}
\newtheorem{exs}[subsection]{Exemples}

\theoremstyle{remark}

\definecolor{wgrey}{RGB}{148, 38, 55}
\definecolor{wgreen}{RGB}{100, 200,0} 
\hypersetup{
    colorlinks=true,
    linkcolor=wgreen,
    urlcolor=wgrey,
    filecolor=wgrey
}

\title{Géométrie algébrique}
\date{}

\begin{document}
\maketitle
\tableofcontents
\chapter*{Introduction}
On est censés prouver Riemann-Roch.
\chapter{Variétés algébriques}
\section{Nullstellensatz}
Pas oublier de rechopper mon carnet. Y'a les preuves complètes.

\begin{thm}
    Y'a une correspondance entre points fermés de
    $\A^n(k)$ et idéaux maximaux dans $Spm(k[T_1,\ldots,T_n])$.
\end{thm}
\begin{cor}
    Si $A$ est une $k$-algèbre de t.f. et $\m$ un idéal maximal
    alors $A/\m$ est une extension finie de $k$.
\end{cor}

\begin{lem}
    Si $A$ est une $k$-algèbre de t.f. alors 
    $\sqrt I = \cap_{\m \in Spm(A), I\subset \m}\m$
\end{lem}
\begin{lem}
    Si $k$ est algébriquement clos, c'est un homéomorphisme (entre
    $\A^n(k)$ et $Spm(k[T_1,\ldots,T_n])$.
\end{lem}
\begin{proof}
    On prends le morphisme quotient, c'est l'évaluation et le noyau est
    de la forme $(T_i-t_i)_i$.
\end{proof}
\begin{thm}[Nullstellensatz]
    Si $k=\bar k$ alors $I(Z(J))=\sqrt J$.
\end{thm}
\begin{proof}
    On a 
    \begin{align*}
	I(Z(J))&=I(\bigcup_{x\in Z(J)}{x})\\
	       &=\bigcap_{x\in Z(J)}I(\{x\})\\
	       &=\bigcap_{x\in Z(J)} \m_x\\
	       &=\bigcap_{\m\in Spm(A), J\subset M} \m
    \end{align*}
    et la dernière est $\sqrt J$ par le lemme. (omg, revoir la preuve
    dans Atiyaah)
\end{proof}
\begin{rem}[!]
    L'endroit où on utilise le weak nullstellensatz on a besoin de $k$
    algébriquement clos. La dernière qui vient du lemme y'a pas besoin.
    Autrement dit, on peut utiliser Spm pour faire de la géométrie 
    algébrique sur un corps non algébriquement clos.
\end{rem}


\begin{defn}
    $A(Z)=k[T_1,\ldots,T_n]/I(Z)$
\end{defn}

Pour $f\in A(z)$ et $\tilde f$ t.q $p(\tilde f)= f$ pour 
$p\colon k[T_1, \ldots, T_n]\to A(Z)$. Pour $z\in k^n$ on peut toujours 
déf $f(z):=\tilde f(z)$. En particulier, on peut déf
\begin{defn}
    $D(f)=\{s\in Z : f(z)\ne 0\}=D(\tilde f)\cap Z$. Avec 
    $D(\tilde f)=\A^n(k)-Z(\tilde f)$.
\end{defn}
\begin{rem}
    Comme d'hab juste il définit pour des fonctions a priori par déf
    sur $\A^n(k)$.
\end{rem}
\begin{rem}[C'est super chiant]
    Faut faire gaffe ducoup en fonction de la fonction que j'utilise
    ou de son lift pour les inclusions.
\end{rem}
\begin{cor}
    Si $f,g\in A(Z)$ et $Z\subset \A^n(k)$. On a 
    \begin{itemize}
	\item Pour $J_1,J_2\leq A(Z)$ : 
	    $Z(J_1)\subset Z(J_2)\leftrightarrow J_2\subset \sqrt J_1$.
	\item $D(f)\subset D(g)\leftrightarrow \exists h\in \A(Z)$ t.q.
	    $f^n=gh$.
	\item Les ouverts principaux forment une base de la topologie.
    \end{itemize}
\end{cor}
\begin{proof}
    Pour le premier point si $Z(J_1)\subset Z(J_2)$ alors faut lift 
    dans $k[T_1, \ldots, T_n]$ avant d'appliquer le nullstellensatz.
    Pour le deuxième, c'est clair.
    Pour le troisième, sur $\A^n(k)$ on prend $f\in I(Z)$ ,où 
    $U=\A^n(k)-Z$, t.q $f(x)\ne 0$ (possible car $x\notin Z$.
\end{proof}
\begin{prop}
    Soit $Z$ un ensemble algébrique affine. Alors $Z$ est irréductible
    ssi $I(Z)$ est premier. Si $k=\bar k$, $I\leq K[T_1,\ldots,T_n]$
    alors $Z(J)$ est irréductible ssi $\sqrt J$ est premier.
\end{prop}
\begin{proof}
    Avec les nouvelles notations c'est direct, avec les anciennes 
    si $Z(J)$ est irreductible $Z(f)\cup Z(g)=Z(J)$ implique 
    $Z(J)\subset Z(f)$ ou $Z(J)\subset Z(g)$. 
\end{proof}

\begin{lem}
    Soit $A$ un anneau noetherien, alors les idéaux radicaux sont 
    des intersections finies d'idéaux premiers.
\end{lem}
\begin{proof}
    On regarde l'ensemble des idéaux qui sont pas des intersections
    d'idéaux premiers. Comme $A$ est noethérien y'a un élement maximal
    $I$ qui n'est pas premier. Soit $a,b\in A-I$ t.q. $ab\in I$. On 
    considère $I_a\sqrt{I+aA}$ et $I_b=\sqrt{I+bA}$. Ils sont plus gros 
    que $I$ donc intersections d'idéaux premiers. En particulier
    on prouve facilement que $I=I_a\cap I_b$ ($I$ est radical).
\end{proof}
\begin{prop}
    Si $k=\bar k$, on a une décomposition unique des ensembles 
    algébriques en variétés irréductibles non contenues les unes dans 
    les autres.
\end{prop}
\begin{proof}
    $I(Z)=\bigcap_{i=1}^m \mathfrak b_i$. On retire les $\mathfrak b_i$
    contenus dans les autres.
\end{proof}
\section{Espace projectif}
On considère $k[T_0,\ldots, T_n]=\bigoplus_{d\geq 0} S_d$. 
\begin{lem}
    Sur les corps infinis, $f\in S_d$ ssi 
    $\lambda^df(x_i,i)=f(\lambda x_i,i)$.
\end{lem}
\begin{defn}
    Un idéal est homogène ssi dès que $f=f_1+\ldots+f_n\in I$ alors
    $f_i\in I$. C'est équivalent à être généré par des éléments 
    homogènes, i.e. $I=\bigoplus S_d\cap I$.
\end{defn}
\begin{rem}
    Comme en géo diff regarder ce qu'il se passe quand on regarde des 
    polynômes homogènes dans $\A^{n+1}$ et qu'on les pousse (homéo?).
\end{rem}
\begin{defn}
    Pour $I$ un idéal homogène de $k[T_0,\ldots, T_n]$, on définit 
    $Z_+(I)=\{P\in \P^n(k) : f(P)=0~\forall f\in I~\textrm{f homogène}\}$
    où autrement on lift $P$ et on prends $f$ quelconque. Si $k$ est
    infini et $Z\subset \P^n(k)$, on définit $I_+(Z)=I(\pi^{-1}(Z))$.
\end{defn}

\begin{thm}[Nullsellensatz projectif]
    On suppose $k=\bar k$ et $J$ homogène. On a 
    \begin{itemize}
	\item $Z_+(J)=\emptyset $ ssi $(T_0,\ldots,T_n)\subset J$.
	\item Si $Z_+(J)\ne \emptyset$ alors $I_+(J_+(J))=\sqrt J$.
    \end{itemize}
\end{thm}
\begin{proof}
    Si $Z_+(J)=\emptyset$ on lift à $\A^{n+1}-0$ pour voir que 
    $Z(J)\subset \{0\}=(T_0,\ldots, T_n)$. Sinon $I_+(Z_+(J))=I(\pi^{-1}
    (Z_+(J)))=I(\pi^{-1}(Z_+(J))\cup\{0\})=\sqrt J$.
\end{proof}
\section{foncions régulières}
Revoir que la topologie de Zariski c'est la plus petite topologie que
rend continue les polynômes. 
\begin{defn}[Fonction régulière]
    On décrit pour $Z\subset \A^n(k)$ l'anneau $\Or_Z(U)$. On prend
    les fonctions qui sont localement des fractions rationnelles.
\end{defn}
\begin{note}
    Trouver exactement où on peut écrire des polynômes, les ouverts sont
    quasi-compacts(!).
\end{note}
\begin{lem}
    $\Or_Z$ est un faisceau pour les restrictions naturelles.
\end{lem}
\begin{proof} C'est évident avec la déf mdr. \end{proof}

\begin{prop}
    Soit $Z\subset \A^n(k)$. 
    \begin{itemize}
	\item Les fonctions régulières sont continues.
	\item Pour tout $f\in \A(Z)$, la flèche $\A(Z)\to \Or_Z(D(f))$
	    passe au quotient en un isom $\A(Z)_f \simeq \Or_Z(D(f))$.
	\item $\A(Z)\simeq \Or_Z(Z)$.
    \end{itemize}
\end{prop}
\begin{proof}
    Pour le premier point l'idée c'est que localement on peut se
    mettre sur un ouvert tel que $f|_U(U)=\{pt\}$. Le deuxième point
    c'est la surjectivité qu'y faut voir. Le troisième point c'est
    le plus cool, c'est l'idée que on commence par décomposer 
    $Z$ en une union finie $\bigcup_i D(f_i)$ où on est une fraction
    rationnelle. Ensuite, on obtient $(gf_i-h_i)|_{D(f_i)}=0$, faut 
    relever puis dérouler avec le fait que $1\in(f_i,i)$ quelque part.
\end{proof}
\begin{rem}
    Si on prend $\A^2\backslash (0,0)$, il a les mêmes sections globales
    que $\A^2$. Ça prouve que cet ouvert est pas affine.
\end{rem}
\section{Morphismes d'ensembles algébriques}
Dans les ensembles algébriques on peut directement prendre des 
fonctions polynomiales ! C'est la preuve d'avant. 

\begin{thm}
    On a une équivalence de catégories entre les $k$-algèbres
    de type finies réduites et la $k$-variétés.
\end{thm}
\begin{note}
    Revoir vite fait la construction.
\end{note}
\section{Espaces annelés}
\begin{defn}
    Un espace annelé est un espace topologique $X$ muni d'un faisceau
    de $k$-algèbre pour nous.
\end{defn}

\begin{defn}
    Un morphisme d'espaces annelés 
    \[(|X|,\Or_X)\to (|Y|, \Or_Y)\] 
    est un couple $(|f|, f^{\#})$. Où 
    $|f|$ est un morphisme d'espaces topologiques et
    $f^{\#}\colon O_Y\to |f|_*\Or_X$
    un morphisme tels que les flèches induites sur 
    les fibres sont des morphismes d'anneaux 
    locaux.
\end{defn}
\begin{note}
    Le faisceau $|f|_*\Or_X$ est le pullback classique. Si
    $y=|f|(x)$, comme d'habitude on a 
    \[f^\#\colon O_{Y,y}\to (|f|_*\Or_X)_y\to \Or_{X,x}\]
    Enfin en fait comme c'est localement annelé apparemment on 
    peut montrer que $f^\#$ c'est automatiquement le pullback de 
    fonctions.
\end{note}
\begin{thm}
    Le couple $(Z,\Or_Z)$ est un espace annelé.
\end{thm}
\begin{proof}
    Les fibres $\Or_{Z,z}$ sont les $\A(Z)_{\m_z}$.
\end{proof}

de notre équivalence de base 
\[\{\textrm{ensembles algébriques affines}\}\to \{k\textrm{-algèbre réduite de type fini}\}\]

on plonge les ensembles algébriques dans les espaces localements
annelés. En fait c'est pleinement fidèle, on a pas un nouvel objet.
\begin{prop}
    On a une bijection 
    \[\Hom_{algSets}(X,Y)\to \Hom_{LocRingedSpace}((X,\Or_X),(Y,\Or_Y))\]
\end{prop}
\begin{proof}
    Étant donné $f\colon X\to Y$, on définit 
    $f^{\#}(U)\colon \Or_Y(U)\to \Or_X(f^{-1}U)$ par $s\mapsto s\circ f$.
    Et à $f$ on associe $(f,f^{\#}$. Maintenant si on a un $(f,f^{\#})$
    un morphisme d'espaces localement annelés quelconque, faut montrer
    que $f$ est un morphisme d'ensemble 
    algébriques et que $f^{\#}$ est bien le pullback habituel. Faut
    se rappeler que $f^{\#}(\m_y)\subset \m_x$ tel que $f(x)=y$. En 
    particulier, le grand carré de 
    % https://q.uiver.app/#q=WzAsOCxbMCwxLCJmXntcXCN9XFxjb2xvblxcbWF0aGNhbCBPX1koVSkiXSxbMiwxLCJcXG1hdGhjYWwgT19YKGZeey0xfVUpIl0sWzAsMiwiT197WSxmKHgpfSJdLFsyLDIsIlxcbWF0aGNhbCBPX3tYLHh9Il0sWzAsMywiaz1PX3tZLGYoeCl9L1xcbWF0aGZyYWsgbV97Zih4KX0iXSxbMiwzLCJPX3tYLHh9L1xcbWF0aGZyYWsgbV97eH09ayJdLFswLDAsInMiXSxbMiwwLCJmXntcXCN9cyJdLFswLDFdLFswLDJdLFsyLDNdLFsxLDNdLFsyLDRdLFs0LDVdLFszLDVdLFs2LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=
\[\begin{tikzcd}[ampersand replacement=\&,cramped]
	s \&\& {f^{\#}s} \\
	{f^{\#}\colon\mathcal O_Y(U)} \&\& {\mathcal O_X(f^{-1}U)} \\
	{O_{Y,f(x)}} \&\& {\mathcal O_{X,x}} \\
	{k=O_{Y,f(x)}/\mathfrak m_{f(x)}} \&\& {O_{X,x}/\mathfrak m_{x}=k}
	\arrow[maps to, from=1-1, to=1-3]
	\arrow[from=2-1, to=2-3]
	\arrow[from=2-1, to=3-1]
	\arrow[from=2-3, to=3-3]
	\arrow[from=3-1, to=3-3]
	\arrow[from=3-1, to=4-1]
	\arrow[from=3-3, to=4-3]
	\arrow[from=4-1, to=4-3]
\end{tikzcd}\]
    commute, et la flèche $\Or_Y(U)\to k$ est l'évaluation, la flèche
    $k\to k$ est l'identité ($1\mapsto 1$), i.e. $f^{\#}(s)(x)=s(f(x))$.
    On a montré que $f^{\#}$ est le pullback habituel. Pour montrer
    que c'est un morphisme, on peut regarder 
    $\tilde f\colon X\to Y\to \A^n_k$. On obtient 
    \[\tilde f(\A^n(k))\colon k[T_1,\colon, T_n]\to \Or_X(X)\]
    qui à $T_1$ associe $f_1$. En particulier, c'est $T_1\circ f$ par
    le point d'avant. De sorte que $\tilde f$ est défini par
    des polynômes et donc un morphisme.
\end{proof}

\section{Recollements}
\section{Sous-variétés}
On appelle variété des unions finies de variétés affines avec le 
faisceau structurant.

\begin{defn}[Sous-variété]
    Pour un fermé dans $Z\subset X$ une variété algébrique. On définit,
    \[\Or_Z(V)=\{f\colon V\to k|\forall z\in V \exists g\in \Or_X(U),
    U\cap Z\subset V,g|_{U\cap Z}=f|_{U\cap Z}\}\]
    autrement dit c'est juste $i^{-1}\Or_X$ pour $i\colon Z\subset X$.
\end{defn}

\begin{lem}
    Soit $X$ une variété algébrique et $Z\subset X$ fermé. Alors
    $Z$ est une variété algébrique. Si $X$ est affine alors $Z$ aussi.
\end{lem}
\begin{proof}
    On doit montrer que $Z$ est un recouvers d'affine. Suffit de 
    montrer que $Z\cap U$ est affine si $U$ est affine. Suffit de
    le montrer dans $X=\A^n$ et là $\Or_Z$ c'est littéralement
    le faisceau de fonction régulière donc on a fini. (Il définit une
    variété affine comme un fermé topologique de $\A^n$ plus faisceau)
\end{proof}


\section{Variétés projectives}
Dans $\P^n(k)$ on définit sur $X=Z_+(I)$, \[\Or_X(U)=\{f\colon U\to k,
\textrm{Localement une fraction homogène}\}\]
Si on définit la localisation homogène en $P$ homogène, avec $B=k[T_1,
\ldots,T_n]/I$, via $B_{(P)}$ les fractions de degrés $0$. Plus
rigoureusement, via $k[T_1,\ldots, T_n]_{(P)}/I_{(P)}$ avec $I_{(P)}=
\{Q/P^n|Q\in I\}$.
\begin{prop}
    Si $X=Z_+(I)\subset \P^n(k)$ et $U=X\cap D_+(p)$ ($\bar P=p$). On a
    $B_{(p)}\simeq \Or_X(U)$.
\end{prop}

\begin{prop}
    Si $P$ est non constant homogène alors $D_+(P)$ est une variété 
    affine. Si $P\in \Or_Z(Z)=B$ de degré $\geq 1$ pareil.
\end{prop}

\begin{defn}
    Les variétés quasi-projectives sont les localement fermées dans
    $\P^n(k)$.
\end{defn}
\chapter{Dimension}
\begin{defn}
    On prend la dimension de Krull avec le sup des chaines de fermés
    irréductibles.
\end{defn}

\begin{rem}

\end{rem}
\printbibliography
\end{document}

